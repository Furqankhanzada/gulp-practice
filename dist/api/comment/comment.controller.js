"use strict";function handleError(n,r){return n.send(500,r)}var _=require("lodash"),Comment=require("./comment.model");exports.index=function(n,r){Comment.find(function(n,e){return n?handleError(r,n):r.json(200,e)})},exports.show=function(n,r){Comment.find({comment_post_id:n.params.id},function(n,e){return n?handleError(r,n):e?r.json(e):r.send(404)})},exports.showReplyComment=function(n,r){Comment.find({comment_parent:n.params.id},function(n,e){return n?handleError(r,n):e?r.json(e):r.send(404)})},exports.create=function(n,r){Comment.create(n.body,function(n,e){return n?handleError(r,n):r.json(201,e)})},exports.update=function(n,r){n.body._id&&delete n.body._id,Comment.findById(n.params.id,function(e,o){if(e)return handleError(r,e);if(!o)return r.send(404);var t=_.merge(o,n.body);t.save(function(n){return n?handleError(r,n):r.json(200,o)})})},exports.destroy=function(n,r){Comment.findById(n.params.id,function(n,e){return n?handleError(r,n):e?void e.remove(function(n){return n?handleError(r,n):r.send(204)}):r.send(404)})};